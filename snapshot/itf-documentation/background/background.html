<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.20">
<meta name="author" content="Karl Heinz Marbaise, 2024-01-01">
<title>Integration Testing Framework Background Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<style>
/*! Stylesheet for CodeRay to loosely match GitHub themes | MIT License */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid;opacity:.35;padding:0 .5em 0 0;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff!important;background:navy!important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:navy}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:teal}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:teal}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:teal}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword{color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:teal}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Integration Testing Framework Background Guide</h1>
<div class="details">
<span id="author" class="author">Karl Heinz Marbaise</span><br>
<span id="author2" class="author">2024-01-01</span><br>
<span id="revnumber">version 0.14.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview_of_the_current_situation">1. Overview of the Current Situation</a>
<ul class="sectlevel2">
<li><a href="#_maven_invoker_plugin">1.1. Maven Invoker Plugin</a></li>
<li><a href="#_maven_verifier_plugin">1.2. Maven Verifier Plugin</a></li>
<li><a href="#_maven_verifier_component">1.3. Maven Verifier Component</a></li>
<li><a href="#_maven_plugin_testing_harness">1.4. Maven Plugin Testing Harness</a></li>
<li><a href="#_mock_repository_manager">1.5. Mock Repository Manager</a></li>
<li><a href="#_why_not_spock">1.6. Why not Spock?</a></li>
<li><a href="#_conclusion">1.7. Conclusion</a></li>
</ul>
</li>
<li><a href="#_basic_idea">2. Basic Idea</a></li>
<li><a href="#_concept">3. Concept</a></li>
<li><a href="#_example">4. Example</a></li>
<li><a href="#_execution_of_maven_itself">5. Execution of Maven itself</a></li>
<li><a href="#_parameter_injection">6. Parameter Injection</a>
<ul class="sectlevel2">
<li><a href="#_mavenexecutionresult">6.1. MavenExecutionResult</a></li>
<li><a href="#_run_conditionally_integration_tests">6.2. Run Conditionally Integration Tests</a></li>
</ul>
</li>
<li><a href="#_assertions_in_maven_tests">7. Assertions in Maven Tests</a>
<ul class="sectlevel2">
<li><a href="#_target_directory_handling">7.1. Target Directory Handling</a></li>
<li><a href="#_new_ideas">7.2. New Ideas</a></li>
<li><a href="#_things_which_do_not_work_yet_not_complete">7.3. Things which do not work yet (not complete!)</a></li>
</ul>
</li>
<li><a href="#_todo_list">8. TODO List</a>
<ul class="sectlevel2">
<li><a href="#_support_for_running_with_several_maven_versions">8.1. Support for running with several Maven Versions</a></li>
</ul>
</li>
<li><a href="#_comparison">9. Comparison</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_overview_of_the_current_situation">1. Overview of the Current Situation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We will use some terms in this document:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The word <strong>cache</strong> will be used for the local repository (<code>$HOME/.m2/repository</code>).</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_maven_invoker_plugin">1.1. Maven Invoker Plugin</h3>
<div class="paragraph">
<p>In <a href="https://maven.apache.org/plugins/maven-invoker-plugin">Maven Invoker Plugin</a> the following issues exist:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Parallelizing does not work and is not easy to integrate based on
current concept and code base.</p>
<div class="ulist">
<ul>
<li>
<p>Apart from being implemented it would hard to express the prevention
of parallel execution in some situations.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Separating caches for each build is hard to implement</p>
</li>
<li>
<p>Get a common cache for a set of integration tests is even harder.</p>
</li>
<li>
<p>A Concept like <code>BeforeEach</code> or <code>BeforeAll</code> is current not really possible.</p>
<div class="ulist">
<ul>
<li>
<p>The concept with <code>setup</code> project is not correctly working at the moment.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Writing integration tests forces one to write in Groovy or Beanshell.</p>
<div class="ulist">
<ul>
<li>
<p>This means to enhance the number of dependencies. In days of Java 5 until 7 it had been an
advantage to use Groovy with it&#8217;s supports for closures etc. which made it simpler and easier
to write things for integration tests, but since JDK 8 it is not necessary anymore.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Integrationtest are not that expressive as they should be.</p>
</li>
<li>
<p>Violation of <a href="https://en.wikipedia.org/wiki/Separation_of_concerns">separation of concern paradigm</a></p>
<div class="ulist">
<ul>
<li>
<p>Conditions</p>
<div class="ulist">
<ul>
<li>
<p>Assertions are hard to express cause one implicit assertion is that a build has to be successful (can be changed if necessary)</p>
</li>
<li>
<p>Conditions for the execution of a test for example are:</p>
<div class="ulist">
<ul>
<li>
<p>should be executed only on JDK11</p>
</li>
<li>
<p>should be executed only on Maven 3.3.9 and above</p>
</li>
<li>
<p>Several other conditions</p>
</li>
</ul>
</div>
</li>
<li>
<p>are expressed within a single file <a href="https://maven.apache.org/plugins/maven-invoker-plugin/integration-test-mojo.html#invokerPropertiesFile"><code>invoker.properties</code></a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_maven_verifier_plugin">1.2. Maven Verifier Plugin</h3>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/plugins/maven-verifier-plugin/">Maven Verifier Plugin</a> is intended to
write tests to check for the existence of files or the absence of files but in the end it is
very limited.</p>
</div>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/shared/maven-verifier/">Maven Verifier</a> is intended to write integration tests for Maven &#8230;&#8203;</p>
</div>
</div>
<div class="sect2">
<h3 id="_maven_verifier_component">1.3. Maven Verifier Component</h3>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/shared/maven-verifier/">Maven Verifier</a> is intended to write a kind of tests:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can set the command line parameters for an executed instance of Maven like <code>-s</code>, <code>-X</code> etc.</p>
</li>
<li>
<p>Execute goals like <code>package</code> or alike.</p>
</li>
<li>
<p>It contains some methods like <code>assertFilePresent</code>, <code>assertFileMatches</code>,
<code>verifyArtifactPresence</code> etc. but not a comprehensive set of methods.</p>
</li>
<li>
<p>Some parts are like Maven Invoker Plugin for example starting an external
process with Maven (something like starting Maven on command line.).</p>
</li>
<li>
<p>Is JUnit 3 based.</p>
</li>
<li>
<p>Manually <a href="https://github.com/apache/maven-integration-testing/blob/master/core-it-suite/src/test/java/org/apache/maven/it/IntegrationTestSuite.java">maintained TestSuite</a>
to execute all integration tests of Maven Core.</p>
</li>
<li>
<p>Each Testcase must be expressed by a separate <a href="https://github.com/apache/maven-integration-testing/blob/master/core-it-suite/src/test/java/org/apache/maven/it/MavenIT0090EnvVarInterpolationTest.java">Test class</a>.</p>
</li>
<li>
<p>Manually <a href="https://github.com/apache/maven-integration-testing/blob/master/core-it-suite/src/test/java/org/apache/maven/it/MavenITmng6391PrintVersionTest.java">implemented conditionally execution</a>.</p>
</li>
<li>
<p>Conditions for execution only based on a self implemented constructor part which defines the Maven version under which it should run or not.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_maven_plugin_testing_harness">1.4. Maven Plugin Testing Harness</h3>
<div class="paragraph">
<p>The <a href="https://maven.apache.org/plugin-testing/maven-plugin-testing-harness/index.html">Maven Plugin Testing Harness</a>is intended to write tests for using parameters correctly and
several other setup situations but the test setup is separated into a unit test like part in code
and a part which is pom like</p>
</div>
<div class="ulist">
<ul>
<li>
<p>It&#8217;s bound to versions of Maven core which might caused issues during testing with other versions
of Maven.</p>
</li>
<li>
<p><a href="https://maven.apache.org/plugin-testing/maven-plugin-testing-harness/getting-started/index.html" class="bare">https://maven.apache.org/plugin-testing/maven-plugin-testing-harness/getting-started/index.html</a></p>
</li>
<li>
<p>Also, JUnit 4 based.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_mock_repository_manager">1.5. Mock Repository Manager</h3>
<div class="paragraph">
<p>Currently, it&#8217;s only possible to have a single instance of the mock repository manager running which
is based on the limited concept because we need to define it in the <code>pom.xml</code>. Of course,
we could start two or more instances but this would make the setup more or less unreadable.</p>
</div>
</div>
<div class="sect2">
<h3 id="_why_not_spock">1.6. Why not Spock?</h3>
<div class="paragraph">
<p>So you might ask why not using Spock or any other testing framework for such purposes?
Let me summarize the different aspects I had in mind:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>People often tend to write Java code (which is valid), cause
they don&#8217;t know Groovy or don&#8217;t want to learn a new language
just to write tests. This means in the end: Why Groovy? Just use Java.</p>
</li>
<li>
<p>It&#8217;s much easier for new contributors/devs to get into the
project if you only need to know Java to write plugins, unit
tests and integration tests. So removing a supplemental
barrier will help.</p>
</li>
<li>
<p>Support for most recent Java versions which is a complete
blocker for the Apache Maven project, cause the Apache Maven Project is  running builds
in a very early stage (Early access) which would block us (see our builds for example <a href="https://builds.apache.org/view/M-R/view/Maven/job/maven-box/job/maven-ear-plugin/job/master/">Apache Maven EAR Plugin Builds</a>).
Currently spock is not yet tested/build against JDK11+ ?
So having a Testing framework which might not work on most
recent versions is a complete blocker.</p>
</li>
<li>
<p>In earlier days I would have argued to use Spock based
on the language features but since JDK8 I don&#8217;t see any advantage
in using Groovy over Java anymore.</p>
</li>
<li>
<p>Spock does not support parallelizing of tests (full blocker for me)</p>
</li>
<li>
<p>Good IDE Support for Groovy is at the moment only given in
IDEA IntelliJ as well as for DSL support for Spock.
That would block many people. This blocker based on the usage
of a particular IDE is not acceptable for an open source project
like the Apache Maven Project and from my point of view as
an Apache Maven PMC member this is simply a no go.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_conclusion">1.7. Conclusion</h3>
<div class="paragraph">
<p>It is needed to have a combination of <a href="https://maven.apache.org/plugins/maven-invoker-plugin">Maven Invoker Plugin</a>, Maven Verifier etc. into
a single Testing framework which should make it possible to make integration tests
easier to write and make them more expressive about what the intention of what a test exactly is.</p>
</div>
<div class="paragraph">
<p>It looks like a good solution to use existing frameworks like <a href="https://junit.org/junit5/">JUnit Jupiter</a> and assertions like
<a href="https://assertj.github.io/doc/">AssertJ</a> library to express what it&#8217;s needed. This in result will give automatically
many advantages for example the integration into the IDE as well as writing the tests in
Java code and furthermore opens easy ways to use existing Java libraries.</p>
</div>
<div class="paragraph">
<p>Using <a href="https://junit.org/junit5/">JUnit Jupiter</a> as base will solve lot of things which are already supported by <a href="https://junit.org/junit5/">JUnit Jupiter</a>
like conditional execution of Tests based on JRE or possible deactivation based on
properties etc.</p>
</div>
<div class="paragraph">
<p>Based on <a href="https://assertj.github.io/doc/">AssertJ</a> it could be easy to express the assertions for test results in many ways and can
also being enhanced by writing custom assertions.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_basic_idea">2. Basic Idea</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The expressiveness of tests is a very important part of writing integration tests or
test in general. If a test is not easy to understand it is very likely not being written.</p>
</div>
<div class="paragraph">
<p>Let us take a look into the following code snippet which is an idea how an integration
test for a <a href="https://maven.apache.org/plugins/">Maven Plugins</a>/Maven Extensions/Maven-Core could look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenProjectResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenProjectResult result) {
    assertThat(result)
      .build()
        .isSuccessful()
      .and()
      .project()
        .hasTarget()
          .withEarFile()
            .containsOnlyOnce(<span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/MANIFEST.MF</span><span class="delimiter">&quot;</span></span>)
        .log()
          .info().contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">Writing data to file</span><span class="delimiter">&quot;</span></span>)
      .cache()
          .withEarFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>)
          .withPomFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>)
          .withMetadata().contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">xxx</span><span class="delimiter">&quot;</span></span>);
  }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_concept">3. Concept</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The idea was to create an <a href="https://junit.org/junit5/docs/current/user-guide/#extensions">JUnit Jupiter extension</a> which will support writing of
integration tests for Maven plugins etc. in a convenient way. Furthermore writing custom assertions
with <a href="https://assertj.github.io/doc/">AssertJ</a> library makes it easier to express the intention of a test.</p>
</div>
<div class="paragraph">
<p>Basic Idea is currently similar to maven-invoker-plugin:
Another option would be to combine this with Docker containers which run Maven.
Extension starts the appropriate Maven version via ProcessBuilder with parameters in it&#8217;s own directory
(<code>target/maven-it/ &#8230;&#8203;</code> )</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Separate</p>
</li>
<li>
<p>Existing repository which contains already installed artifacts for
special cases (see <a href="https://github.com/mojohaus/versions-maven-plugin">Versions Maven Plugin</a> a lot of test cases need special artifacts in
repository for integration tests). Using a directory default: <code>local-repo</code>. ?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_example">4. Example</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following integration test is a basic skeleton of an integration test which implies some conventions
which will be describe within the following paragraphs.</p>
</div>
<div class="listingblock">
<div class="title">FirstIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The directory structure of an integration test will look like this. This is by convention the same
as for any kind of unit- or integration-test in Maven or more in general in Java projects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">src
 +-- test
      +-- java
            +-- org
                 +-- it
                      +-- FirstIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>The convention is simply by mapping the method name (including the package name) into a directory.
The <code>resources</code> directory is the location where to find the project for the integration tests. Basic
start is the class name <code>FirstIT</code> which defines the base directory for all test cases.</p>
</div>
<div class="paragraph">
<p>In Ma
The intermediate directory <code>maven-its</code> is intended to separate the usual resources from the
integration test resources.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">src
 +-- test
      +-- resources
            +-- maven-its
                +-- org
                     +-- it
                          +-- FirstIT</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now we have the need to separate each test case from each other which is done via the method name of
the test case within the test class  <code>FirstIT</code> which has the methods <code>first</code> and <code>second</code> in our
examples. This will look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">src
 +-- test
      +-- resources
            +-- maven-its
                +-- org
                     +-- it
                          +-- FirstIT
                                +- first
                                     +- src
                                     +- pom.xml
                                +- second
                                     +- src
                                     +- pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>During the execution of the integration tests the following directories will be created within the
<code>target</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">target
 +- maven-its
        +- org
           +- it
              +- FirstIT
                  +- first
                        +- .m2/
                        +- project
                        +- mvn-stdout.log
                        +- mvn-stderr.log
                        +- other logs
                  +- second
                        +- .m2/
                        +- project
                        +- mvn-stdout.log
                        +- mvn-stderr.log
                        +- other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the above you can see that each test case (method within the class) has it&#8217;s own
local cache (<code>.m2/repository</code>). You see the resulting project is built within the <code>project</code> folder
to make separated from log files and local cache. The result of this setup is that each
test case is completely separated from each other test case and gives us an easy way to parallelize
the integration test cases in a simple way.</p>
</div>
<div class="paragraph">
<p>It is possible to define the cache for several test cases globally which can simply being done by
using the following annotation <code>@MavenRepository</code>.
This give the opportunity to make different tests share the same cache which is like a usual setup
for a user on a local machine which can be used to test different scenarios.
The default behaviour is that each test case has it&#8217;s own local cache <code>.m2/repository</code>.</p>
</div>
<div class="paragraph">
<p>One very important thing is to mention that if you define <code>@MavenRepository</code> as given in the
following example you have to be aware of that those test cases running by default in parallel
which mean you have to limit the thread usage via <code>@Execution(ExecutionMode.SAME_THREAD)</code> otherwise
it could happen you might get strange errors.</p>
</div>
<div class="listingblock">
<div class="title">FirstMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenRepository</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.parallel.Execution</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.parallel.ExecutionMode</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>
<span class="annotation">@Execution</span>(ExecutionMode.SAME_THREAD)
<span class="type">class</span> <span class="class">FirstIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Sometimes it could be useful to setup a number of project together to test things related to
usage of other other artifacts or other projects etc. this can be achieved by using the following
setup:</p>
</div>
<div class="listingblock">
<div class="title">MavenIntegrationIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.assertj.MavenITAssertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenRepository</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.MethodOrderer.OrderAnnotation</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.Order</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.TestMethodOrder</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>
<span class="annotation">@TestMethodOrder</span>(OrderAnnotation.class)
<span class="type">class</span> <span class="class">MavenIntegrationIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">install</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Order</span>(<span class="integer">10</span>)
  <span class="type">void</span> setup(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">install</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@Order</span>(<span class="integer">20</span>)
  <span class="type">void</span> setup_2(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first_integration_test(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the given annotation  <code>@MavenRepository</code> this will
define a global cache for all test cases within the given test class <code>MavenIntegrationIT</code>.</p>
</div>
<div class="paragraph">
<p>So based on the above test case you will get a resulting directory structure which looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">target
 +- maven-its
        +- org
           +- it
              +- MavenIntegrationIT
                  +- .m2/
                  +- setup
                        +- project
                        +- mvn-stdout.log
                        +- mvn-stderr.log
                        +- other logs
                  +- setup_2
                        +- project
                        +- mvn-stdout.log
                        +- mvn-stderr.log
                        +- other logs
                  +- first_integration_test
                        +- project
                        +- mvn-stdout.log
                        +- mvn-stderr.log
                        +- other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are two things to mention. First the cache which is common for all given tests cases
<code>setup</code>, <code>setup_2</code> and for <code>first_integration_test</code>. Furthermore the definition of the order of
execution given by using <code>@Order(10)</code> which defines the order of execution for those test cases which
are used as setup projects for the real test case <code>first_integration_test</code>. This makes it easy
possible define any kind of setup projects for a bigger complexer test case.</p>
</div>
<div class="paragraph">
<p>Separate repository which contains already installed artifacts <code>local-repo</code>:</p>
</div>
<div class="paragraph">
<p>Think how to make the build use it?</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">src
 +-- test
      +-- resources
            +-- maven-its
                +-- org
                     +-- it
                          +-- FirstIT
                                +- .local-repo
                                +- first
                                     +- src
                                     +- pom.xml
                                +- second
                                     +- src
                                     +- pom.xml</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_execution_of_maven_itself">5. Execution of Maven itself</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>How to get the Maven version which is defined?</p>
<div class="ulist">
<ul>
<li>
<p>Define within the same pom file you run your tests?</p>
</li>
<li>
<p>Ok could be downloaded from Central?</p>
</li>
<li>
<p>how to handle repository managers?</p>
</li>
</ul>
</div>
</li>
<li>
<p>Where to get configured all the avialble Maven versions?
On the system?
or should we simply download it always to be sure?</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parameter_injection">6. Parameter Injection</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Possible options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Information about the built project</p>
<div class="ulist">
<ul>
<li>
<p>version, GAV etc. maybe the whole POM tree ?</p>
</li>
<li>
<p>think more in details?</p>
</li>
</ul>
</div>
</li>
<li>
<p>Logging output</p>
<div class="ulist">
<ul>
<li>
<p>Stdout</p>
</li>
<li>
<p>StdErr</p>
</li>
<li>
<p>Log Output as Stream or after finished running</p>
</li>
<li>
<p>Convenience methods to get information from the log</p>
<div class="ulist">
<ul>
<li>
<p><code>isInfo()</code> which relates to <code>[INFO] ..</code> Think about this?</p>
</li>
<li>
<p>Some things to get output from plugins etc.???</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>Access to the cache directory</p>
<div class="ulist">
<ul>
<li>
<p>With convenience methods to access artifacts/content of artifacts</p>
</li>
<li>
<p>???</p>
</li>
</ul>
</div>
</li>
<li>
<p>general build result.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_mavenexecutionresult">6.1. MavenExecutionResult</h3>
<div class="ulist">
<ul>
<li>
<p>MavenExecutionResult</p>
<div class="ulist">
<ul>
<li>
<p>isSuccessful() <code>BUILD SUCCESS</code></p>
</li>
<li>
<p>isError() <code>[ERROR]&#8230;&#8203;.</code></p>
</li>
<li>
<p>is</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">ThirdMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isSuccessful();
  }
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isFailed();
  }

}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_run_conditionally_integration_tests">6.2. Run Conditionally Integration Tests</h3>
<div class="paragraph">
<p>You might want to run an integration test only for a particular Maven version for example running
only for Maven 3.6.0?</p>
</div>
<div class="listingblock">
<div class="title">ForthMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.assertj.MavenExecutionResultAssert.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenVersion.M3_0_5</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenVersion.M3_6_0</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.DisabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.EnabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@EnabledForMavenVersion</span>(M3_6_0)
  <span class="type">void</span> first_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isSuccessful();
  }

  <span class="annotation">@DisabledForMavenVersion</span>(M3_0_5)
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isFailure();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So not run some tests on particular Java version can be handled via usual JUnit Jupiter things like:</p>
</div>
<div class="listingblock">
<div class="title">FivthMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.assertj.MavenITAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenVersion.M3_0_5</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenVersion.M3_6_0</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.DisabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.EnabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.condition.DisabledOnJre</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.condition.JRE</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@DisabledOnJre</span>(JRE.JAVA_10)
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@EnabledForMavenVersion</span>(M3_6_0)
  <span class="type">void</span> first_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isSuccessful();
  }

  <span class="annotation">@DisabledForMavenVersion</span>(M3_0_5)
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isFailure();
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assertions_in_maven_tests">7. Assertions in Maven Tests</h2>
<div class="sectionbody">
<div class="paragraph">
<p>What kind of assertions do we need to express:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Build itself has successfully ended or failed. (Return code? enough?)</p>
</li>
<li>
<p>Log File contains several information</p>
<div class="ulist">
<ul>
<li>
<p>Different levels <code>INFO</code>,  <code>WARN</code> or <code>ERROR</code>..</p>
<div class="ulist">
<ul>
<li>
<p>contains simply one or more lines text</p>
</li>
<li>
<p>contains only once or multiple appearance of texts</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>StdErr output contains particular output or should not contain particular output.</p>
</li>
<li>
<p>The <code>target</code> directory of the built project contains
either:</p>
<div class="ulist">
<ul>
<li>
<p>particular files</p>
<div class="ulist">
<ul>
<li>
<p>simply exist/do not exist?</p>
</li>
<li>
<p>should exist or should not exist</p>
</li>
<li>
<p>The files contain particular content? for example or in general directory within
the file <code>MANIFEST.MF</code>.</p>
</li>
<li>
<p>A packaged file  special content?</p>
</li>
</ul>
</div>
</li>
<li>
<p>directories</p>
</li>
<li>
<p>??</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">SixthMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.assertj.MavenExecutionResultAssert.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isSuccessful();
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenExecutionResult result) {
    assertThat(result).isFailed().log().contains().plugin(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>);
    assertThat(result)
      .isSuccessful()
      .and()
      .project(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>)
        .module(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>)
          hasTarget().withJarFile().metainf
  }
}</code></pre>
</div>
</div>
<div class="sect2">
<h3 id="_target_directory_handling">7.1. Target Directory Handling</h3>
<div class="listingblock">
<div class="title">SeventhMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.assertj.MavenProjectResultAssert.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenProjectResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenProjectResult project) {
    assertThat(project).hasTarget()
        .withEarFile()
        .containsOnlyOnce(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/application.xml</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/appserver-application.xml</span><span class="delimiter">&quot;</span></span>
        );
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> third_test_case(MavenProjectResult project) {
    assertThat(project).hasTarget()
        .withEarFile()
        .doesNotContain(<span class="string"><span class="delimiter">&quot;</span><span class="content">commons-io-1.4.jar</span><span class="delimiter">&quot;</span></span>)
        .containsOnlyOnce(
            <span class="string"><span class="delimiter">&quot;</span><span class="content">commons-lang-commons-lang-2.5.jar</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/application.xml</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/MANIFEST.MF</span><span class="delimiter">&quot;</span></span>
        );
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_new_ideas">7.2. New Ideas</h3>
<div class="paragraph">
<p>The basic idea is to have the assertions based on an entry point which is
<code>MavenExecutionResultAssert</code> related to <code>MavenExecutionResult</code>.</p>
</div>
<div class="paragraph">
<p>The following are example how an integration test could look like:</p>
</div>
<div class="listingblock">
<div class="title">UnknownMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.apache.maven.jupiter.assertj.MavenProjectResultAssert.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenProjectResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> third_test_case(MavenProjectResult project) {
    assertThat(project)
      .hasCache()
        .withEarFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">G:A:V</span><span class="delimiter">&quot;</span></span>).containsOnlyOnce(<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span>)
        .withJarFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span>).contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">..</span><span class="delimiter">&quot;</span></span>)
        .withPomFile(<span class="string"><span class="delimiter">&quot;</span><span class="content">g:a:v:c</span><span class="delimiter">&quot;</span></span>).containsDependency(<span class="string"><span class="delimiter">&quot;</span><span class="content">xxx</span><span class="delimiter">&quot;</span></span>)
        .withArchive(<span class="string"><span class="delimiter">&quot;</span><span class="content">.tar.gz</span><span class="delimiter">&quot;</span></span>).contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span>);
    assertThat(project).log().contains(<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span>)
    assertThat(project).hasModule(<span class="string"><span class="delimiter">&quot;</span><span class="content">A:G</span><span class="delimiter">&quot;</span></span>).hasTarget().withEarFile()....
    assertThat(project).build().isSuccessful().hasTarget()
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_things_which_do_not_work_yet_not_complete">7.3. Things which do not work yet (not complete!)</h3>
<div class="paragraph">
<p>Later we will create an plugin for the purpose an can inject the information into the test cases as
we already did like in <a href="https://maven.apache.org/plugins/maven-invoker-plugin">Maven Invoker Plugin</a>.</p>
</div>
<div class="paragraph">
<p>This is:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Currently it is not possible to define the version Maven only within the test case.
Unfortunately we have to define it in the Maven pom which is used to download the
needed package from Central.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_todo_list">8. TODO List</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_support_for_running_with_several_maven_versions">8.1. Support for running with several Maven Versions</h3>
<div class="ulist">
<ul>
<li>
<p>Currently we are limited to run under the Maven version which is used by
running the integration tests.</p>
</li>
<li>
<p>We need to consider where we ran tests with different versions of Maven to check
compatibility for things. Something like this:</p>
</li>
<li>
<p>Based on the above requirements the following question will arise:</p>
<div class="ulist">
<ul>
<li>
<p>Where to download the appropriate Apache Maven versions?</p>
</li>
<li>
<p>Handle each test case separately into a separate directory to
keep them independent.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">MultiVersionIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenProjectResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenVersion</span>({<span class="integer">3</span>_0_5, <span class="integer">3</span>_3_9})
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> third_test_case(MavenProjectResult project) {
    assertThat(project)
      ...
  }
}</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Defining a range for Maven versions which will be used to execute the tests.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">MultiVersionIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">org.apache.maven.jupiter.extension.maven.MavenProjectResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenVersionRange</span>(from = <span class="integer">3</span>_0_5, upto=<span class="integer">3</span>_6_3)
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> third_test_case(MavenProjectResult project) {
    assertThat(project)
      ...
  }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_comparison">9. Comparison</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Testing parallelization looks already very good. The following run is using parallel execution
of the tests:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[INFO]
[INFO] --- maven-failsafe-plugin:2.22.1:integration-test (default) @ maven-ear-plugin ---
[INFO]
[INFO] -------------------------------------------------------
[INFO]  T E S T S
[INFO] -------------------------------------------------------
[INFO] Running org.apache.maven.plugins.ear.it.EARIT
[WARNING] Tests run: 15, Failures: 0, Errors: 0, Skipped: 2, Time elapsed: 21.297 s - in org.apache.maven.plugins.ear.it.EARIT
[INFO]
[INFO] Results:
[INFO]
[WARNING] Tests run: 15, Failures: 0, Errors: 0, Skipped: 2
[INFO]
[INFO]
[INFO] --- maven-checkstyle-plugin:3.0.0:check (checkstyle-check) @ maven-ear-plugin ---
[INFO] There are 3 errors reported by Checkstyle 6.18 with config/maven_checks.xml ruleset.
[INFO] Ignored 3 errors, 0 violation remaining.
[INFO]
[INFO] --- maven-failsafe-plugin:2.22.1:verify (default) @ maven-ear-plugin ---
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  32.282 s
[INFO] Finished at: 2019-12-03T18:51:21+01:00
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The usual way via maven-invoker</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>[INFO]
[INFO] --- maven-invoker-plugin:3.2.1:integration-test (integration-test) @ maven-ear-plugin ---
[INFO] Building: skinny-wars-filenamemapping-full/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           skinny-wars-filenamemapping-full/pom.xml ......... SUCCESS (4.1 s)
[INFO] Building: jboss/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           jboss/pom.xml .................................... SUCCESS (1.6 s)
[INFO] Building: skinny-wars/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           skinny-wars/pom.xml .............................. SUCCESS (2.3 s)
[INFO] Building: transitive-excludes/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           transitive-excludes/pom.xml ...................... SUCCESS (1.6 s)
[INFO] Building: MEAR-198/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           MEAR-198/pom.xml ................................. SUCCESS (1.7 s)
[INFO] Building: non-skinny-wars/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           non-skinny-wars/pom.xml .......................... SUCCESS (2.3 s)
[INFO] Building: filenamemapping-usage-fail/pom.xml
[INFO] run post-build script verify.groovy
[INFO]           filenamemapping-usage-fail/pom.xml ............... SUCCESS (2.5 s)
[INFO] Building: MEAR-243-skinny-wars-provided/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           MEAR-243-skinny-wars-provided/pom.xml ............ SUCCESS (2.3 s)
[INFO] Building: basic/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           basic/pom.xml .................................... SUCCESS (1.7 s)
[INFO] Building: packaging-includes/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           packaging-includes/pom.xml ....................... SUCCESS (1.7 s)
[INFO] Building: resource-custom-directory/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           resource-custom-directory/pom.xml ................ SUCCESS (1.6 s)
[INFO] Building: skinny-wars-javaee5/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           skinny-wars-javaee5/pom.xml ...................... SUCCESS (2.9 s)
[INFO] Building: skinny-wars-filenamemapping-no-version/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           skinny-wars-filenamemapping-no-version/pom.xml ... SUCCESS (2.3 s)
[INFO] Building: same-artifactId/pom.xml
[INFO] run post-build script verify.groovy
[INFO]           same-artifactId/pom.xml .......................... SUCCESS (3.4 s)
[INFO] Building: packaging-excludes/pom.xml
[INFO] run post-build script verify.bsh
[INFO]           packaging-excludes/pom.xml ....................... SUCCESS (1.7 s)
[INFO] Building: descriptor-encoding/pom.xml
[INFO] run post-build script verify.groovy
[INFO]           descriptor-encoding/pom.xml ...................... SUCCESS (2.0 s)
[INFO]
[INFO] --- maven-failsafe-plugin:2.22.1:integration-test (default) @ maven-ear-plugin ---
[INFO] Tests are skipped.
[INFO]
[INFO] --- maven-checkstyle-plugin:3.0.0:check (checkstyle-check) @ maven-ear-plugin ---
[INFO] There are 3 errors reported by Checkstyle 6.18 with config/maven_checks.xml ruleset.
[INFO] Ignored 3 errors, 0 violation remaining.
[INFO]
[INFO] --- maven-invoker-plugin:3.2.1:verify (integration-test) @ maven-ear-plugin ---
[INFO] -------------------------------------------------
[INFO] Build Summary:
[INFO]   Passed: 16, Failed: 0, Errors: 0, Skipped: 0
[INFO] -------------------------------------------------
[INFO]
[INFO] --- maven-failsafe-plugin:2.22.1:verify (default) @ maven-ear-plugin ---
[INFO] Tests are skipped.
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  44.882 s
[INFO] Finished at: 2019-12-03T18:48:53+01:00
[INFO] ------------------------------------------------------------------------</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.14.0-SNAPSHOT<br>
Last updated 2024-01-01 12:23:01 UTC
</div>
</div>
</body>
</html>