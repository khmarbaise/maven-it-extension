<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<meta name="author" content="Karl Heinz Marbaise, 2020-08-20">
<title>Integration Testing Framework Users Guide</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>Integration Testing Framework Users Guide</h1>
<div class="details">
<span id="author" class="author">Karl Heinz Marbaise</span><br>
<span id="author2" class="author">2020-08-20</span><br>
<span id="revnumber">version 0.10.0-SNAPSHOT</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_overview">1. Overview</a>
<ul class="sectlevel2">
<li><a href="#_what_is_integration_testing_framework">1.1. What is Integration Testing Framework?</a></li>
<li><a href="#_status">1.2. Status</a></li>
</ul>
</li>
<li><a href="#_about_this_guide">2. About this Guide</a></li>
<li><a href="#_overview_2">3. Overview</a></li>
<li><a href="#_configuration_in_maven">4. Configuration in Maven</a>
<ul class="sectlevel2">
<li><a href="#_users_point_of_view">4.1. User&#8217;s Point of View</a></li>
<li><a href="#_developers_point_of_view">4.2. Developer&#8217;s Point of View</a></li>
</ul>
</li>
<li><a href="#_structuring_integration_tests">5. Structuring Integration Tests</a>
<ul class="sectlevel2">
<li><a href="#_a_single_test_case">5.1. A Single Test Case</a></li>
<li><a href="#_test_case_execution">5.2. Test Case Execution</a></li>
<li><a href="#_several_test_cases">5.3. Several Test Cases</a></li>
</ul>
</li>
<li><a href="#_goals_profiles_properties_and_command_line_options">6. Goals, Profiles, Properties and Command Line Options</a>
<ul class="sectlevel2">
<li><a href="#_goals">6.1. Goals</a></li>
<li><a href="#_profiles">6.2. Profiles</a></li>
<li><a href="#_system_properties">6.3. System Properties</a></li>
<li><a href="#_command_line_options">6.4. Command Line Options</a></li>
<li><a href="#_default_goalsoptions">6.5. Default Goals,Options</a></li>
</ul>
</li>
<li><a href="#_scenarios">7. Scenarios</a>
<ul class="sectlevel2">
<li><a href="#_grouping_test_cases">7.1. Grouping Test Cases</a></li>
<li><a href="#_common_maven_cache">7.2. Common Maven Cache</a></li>
<li><a href="#_predefined_repository_content_for_tests">7.3. Predefined Repository Content for Tests</a></li>
<li><a href="#_single_project_with_several_executions">7.4. Single Project With Several Executions</a></li>
</ul>
</li>
<li><a href="#_test_case_execution_2">8. Test Case Execution</a>
<ul class="sectlevel2">
<li><a href="#_conditionally_executing_tests">8.1. Conditionally Executing Tests</a></li>
</ul>
</li>
<li><a href="#_assertions">9. Assertions</a>
<ul class="sectlevel2">
<li><a href="#_overview_3">9.1. Overview</a></li>
<li><a href="#_assertion_for_maven_log">9.2. Assertion for Maven Log</a></li>
<li><a href="#_expressing_assertions">9.3. Expressing Assertions</a></li>
</ul>
</li>
<li><a href="#_special_cases">10. Special Cases</a>
<ul class="sectlevel2">
<li><a href="#_overview_4">10.1. Overview</a></li>
<li><a href="#_failing_the_build">10.2. Failing the build</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_overview"><a class="link" href="#_overview">1. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The documentation intends to give a comprehensive reference for programmers writing
integration tests for Maven Plugins / Maven Core Extensions / Maven Core.</p>
</div>
<div class="sect2">
<h3 id="_what_is_integration_testing_framework"><a class="link" href="#_what_is_integration_testing_framework">1.1. What is Integration Testing Framework?</a></h3>
<div class="paragraph">
<p>The Integration Testing Framework (ITF for short) is in its foundation a <a href="https://junit.org/junit5/docs/current/user-guide/#extensions">JUnit Jupiter Extension</a>,
which supports you in writing integration tests for Maven Plugins etc. There are several aspects,
that makes writing integration tests for Maven Plugins at the
<a href="https://khmarbaise.github.io/maven-it-extension/itf-documentation/background/background.html">moment harder than it should be</a>. This is the reason, why this framework exists.</p>
</div>
</div>
<div class="sect2">
<h3 id="_status"><a class="link" href="#_status">1.2. Status</a></h3>
<div class="paragraph">
<p>The current status of this extension is experimental while some people call it Proof of Concept (PoC).
This framework has not yet reached version <code>1.0.0</code> which means that anything can change, but I try
to keep compatibility as much as possible. I will only break it if really needed. In such cases it will
be documented in the release notes. I strongly recommend reading the release notes.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_about_this_guide"><a class="link" href="#_about_this_guide">2. About this Guide</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>This guide represents the current state of development and things, which work (or more accurate: <strong>should work</strong>).
If you find things which do not work as described here or even don&#8217;t work at all, please don&#8217;t hesitate
to <a href="https://github.com/khmarbaise/maven-it-extension/issues">create an appropriate issue</a> and describe what does not work or does not work at
all as described or maybe does not work as you might expect it to work.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
This guide is of course not a guarantee that it works, cause the project is in a very
early stage.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview_2"><a class="link" href="#_overview_2">3. Overview</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The idea of integration tests for Maven Plugins, Maven Extensions, Maven Core is to keep the
functionality the way it has been defined independent of refactoring code or improving
functionality.</p>
</div>
<div class="paragraph">
<p>This maven integration test framework is an extension for <a href="https://junit.org/junit5/">JUnit Jupiter</a>. The usage of JUnit Jupiter
already gives a lot of support for things, which are very useful while writing unit- and integration
tests. The idea of testing is to express the requirements in code. Those are in other words
the tests, which should be written.</p>
</div>
<div class="paragraph">
<p>If you are not familiar with JUnit Jupiter, I strongly recommend reading the
<a href="https://junit.org/junit5/docs/current/user-guide/">JUnit Jupiter User Guide</a> first.</p>
</div>
<div class="paragraph">
<p>The significance of tests is a very important part of writing integration tests or
test in general. If a test is not easy to understand, it is very likely not being written.</p>
</div>
<div class="paragraph">
<p>Let us take a look into the following test code example which gives you an impression, how an integration
test for a <a href="https://maven.apache.org/plugins/">Maven Plugins</a>/Maven Extensions/Maven-Core should look like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span> // <b class="conum">(1)</b>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span> // <b class="conum">(2)</b>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) { // <b class="conum">(3)</b>
    assertThat(result).build().isSuccessful(); // <b class="conum">(4)</b>
  }

}</code></pre>
</div>
</div>
<div class="colist arabic">
<ol>
<li>
<p>The Maven Integration test annotation</p>
</li>
<li>
<p>The Maven Test annotation.</p>
</li>
<li>
<p>The result of the execution injected into the test method (details in Chapter <a href="">Needs to be written</a>)</p>
</li>
<li>
<p>The above used assertions like <code>assertThat(..)</code> are custom assertions which will be
explained in <a href="#_assertions">Assertions chapter</a>.</p>
</li>
</ol>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_in_maven"><a class="link" href="#_configuration_in_maven">4. Configuration in Maven</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_users_point_of_view"><a class="link" href="#_users_point_of_view">4.1. User&#8217;s Point of View</a></h3>
<div class="paragraph">
<p>You are a user who want to use the integration test framework to write integration tests for a plugin etc.
This area shows how to configure the integration test framework in your Maven build and what kind of requirements
exist.</p>
</div>
<div class="paragraph">
<p>The prerequisites to use this integration test framework is, that you are running JDK8 at minimum for your tests.
This is based on using <a href="https://junit.org/junit5/docs/current/user-guide/#extensions">JUnit Jupiter Extension</a> and of course on the implemented code
of this extension.</p>
</div>
<div class="paragraph">
<p>The requirements are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK8+</p>
</li>
<li>
<p>Apache Maven 3.1.0 or above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first step is to add the appropriate dependencies to your project. They are usually with <code>test</code> scope,
cause you only need them during the integration tests.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.assertj<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>assertj-core<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>com.soebes.itf.jupiter.extension<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>itf-assertj<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>0.10.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>org.junit.jupiter<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>junit-jupiter-engine<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span>
    <span class="tag">&lt;dependency&gt;</span>
      <span class="tag">&lt;groupId&gt;</span>com.soebes.itf.jupiter.extension<span class="tag">&lt;/groupId&gt;</span>
      <span class="tag">&lt;artifactId&gt;</span>itf-jupiter-extension<span class="tag">&lt;/artifactId&gt;</span>
      <span class="tag">&lt;version&gt;</span>0.10.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
      <span class="tag">&lt;scope&gt;</span>test<span class="tag">&lt;/scope&gt;</span>
    <span class="tag">&lt;/dependency&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The dependency <code>com.soebes.itf.jupiter.extension:itf-assertj</code> contains custom assertions of <a href="https://assertj.github.io/doc/">AssertJ</a>
in case you want to use <a href="https://assertj.github.io/doc/">AssertJ</a> as your assertion framework. This means you have to include
<code>org.assertj:assertj-core</code> as well. If you don&#8217;t want to use AssertJ as assertion framework you can omit them both.</p>
</div>
<div class="paragraph">
<p>Now you have to have the dependency <code>org.junit.jupiter:junit-jupiter-engine</code> to get tests running with
<a href="https://junit.org/junit5/">JUnit Jupiter</a> and finally you have to add the <code>com.soebes.itf.jupiter.extension:itf-jupiter-extension</code> dependency to
get the support for your Maven integration tests.</p>
</div>
<div class="paragraph">
<p>Based on the described structures the content (with the projects which is used as test) from
<code>src/test/resources-its</code> has to be copied into <code>target/test-classes</code> which usually means including
filtering. This is used to replace placeholders in files like <code>@project.version@</code> and replace with
the real version of your extension/plugin etc. You have to be careful, which delimiter you have
chosen. So you might need to tweak your configuration based on your choices.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">    <span class="tag">&lt;testResources&gt;</span>
      <span class="tag">&lt;testResource&gt;</span>
        <span class="tag">&lt;directory&gt;</span>src/test/resources<span class="tag">&lt;/directory&gt;</span>
        <span class="tag">&lt;filtering&gt;</span>false<span class="tag">&lt;/filtering&gt;</span>
      <span class="tag">&lt;/testResource&gt;</span>
      <span class="comment">&lt;!--
       ! Currently those tests do need to be filtered.
      --&gt;</span>
      <span class="tag">&lt;testResource&gt;</span>
        <span class="tag">&lt;directory&gt;</span>src/test/resources-its<span class="tag">&lt;/directory&gt;</span>
        <span class="tag">&lt;filtering&gt;</span>true<span class="tag">&lt;/filtering&gt;</span>
      <span class="tag">&lt;/testResource&gt;</span>
    <span class="tag">&lt;/testResources&gt;</span>
    <span class="tag">&lt;plugins&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The next thing is to configure the <code>itf-maven-plugin</code> with the <code>install</code> goal
like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.soebes.itf.jupiter.extension<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>itf-maven-plugin<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>0.10.0-SNAPSHOT<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;executions&gt;</span>
          <span class="tag">&lt;execution&gt;</span>
            <span class="tag">&lt;id&gt;</span>installing<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;phase&gt;</span>pre-integration-test<span class="tag">&lt;/phase&gt;</span>
            <span class="tag">&lt;goals&gt;</span>
              <span class="tag">&lt;goal&gt;</span>install<span class="tag">&lt;/goal&gt;</span>
            <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;/execution&gt;</span>
        <span class="tag">&lt;/executions&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>itf-maven-plugin</code> copies the code of your extension/plugin into appropriate directories which are used during the
integration tests.</p>
</div>
<div class="paragraph">
<p>Finally you have to add a configuration for <a href="https://maven.apache.org/surefire/maven-failsafe-plugin/">Maven Failsafe Plugin</a> like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>maven-failsafe-plugin<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;configuration&gt;</span>
          <span class="comment">&lt;!--
           ! currently needed to run integration tests.
          --&gt;</span>
          <span class="tag">&lt;systemProperties&gt;</span>
            <span class="tag">&lt;maven.version&gt;</span>${maven.version}<span class="tag">&lt;/maven.version&gt;</span>
            <span class="tag">&lt;maven.home&gt;</span>${maven.home}<span class="tag">&lt;/maven.home&gt;</span>
          <span class="tag">&lt;/systemProperties&gt;</span>
        <span class="tag">&lt;/configuration&gt;</span>
        <span class="tag">&lt;executions&gt;</span>
          <span class="tag">&lt;execution&gt;</span>
            <span class="tag">&lt;goals&gt;</span>
              <span class="tag">&lt;goal&gt;</span>integration-test<span class="tag">&lt;/goal&gt;</span>
              <span class="tag">&lt;goal&gt;</span>verify<span class="tag">&lt;/goal&gt;</span>
            <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;/execution&gt;</span>
        <span class="tag">&lt;/executions&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The given properties like <code>maven.version</code> transfers the version of Maven which is used
within the <code>itf-jupiter-extension</code> to run your integration tests and the <code>maven.home</code> transfers the
information of where to find the current Maven installation. This is needed to start the Maven process
from within the integration tests.</p>
</div>
<div class="paragraph">
<p>The usage of <a href="https://maven.apache.org/surefire/maven-failsafe-plugin/">Maven Failsafe Plugin</a> implies the naming convention for the integration
tests like <code>*IT.java</code> but of course you can change that by using the appropriate configuration if you like or need to.</p>
</div>
<div class="paragraph">
<p>The above described configuration will make it possible to run all tests via command line by using <code>mvn clean verify</code>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
It is also possible to run the integration tests from your IDE. This only works if you have done the
<code>mvn clean verify</code> once before on command line. Then you can run the integration tests from your IDE as long as you
don&#8217;t change the code of the plugin/extension etc. which is under test. You can change the tests without any limitation
(If you find any please create an issue for that.)
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The whole given configuration which comprises of <code>itf-maven-plugin</code> and the
configuration for <code>maven-failsafe-plugin</code> should be replaced by separate maven plugin later to make the usage
more convenient.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_developers_point_of_view"><a class="link" href="#_developers_point_of_view">4.2. Developer&#8217;s Point of View</a></h3>
<div class="paragraph">
<p>You are a potential contributor or just interested in how the code of this extension is working/looks like or you are a
user who wants to test with the bleeding edge of this extension.</p>
</div>
<div class="paragraph">
<p>The requirements for building this extensions are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>JDK8+ (need to reconsider)</p>
</li>
<li>
<p><a href="https://maven.apache.org/">Apache Maven 3.6.0+</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You have to clone the git repository and you can build the extension simply via: <code>mvn clean install</code>. The <code>install</code> is
needed to install the created artifacts into your local repository for reuse.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_structuring_integration_tests"><a class="link" href="#_structuring_integration_tests">5. Structuring Integration Tests</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_a_single_test_case"><a class="link" href="#_a_single_test_case">5.1. A Single Test Case</a></h3>
<div class="paragraph">
<p>The location of an integration test defaults to <code>src/test/java/&lt;package&gt;/FirstMavenIT.java</code>.
The selected naming schema like <code>&lt;any&gt;IT.java</code> implies that it will be executed by the
<a href="https://maven.apache.org/surefire/maven-failsafe-plugin/">Maven Failsafe Plugin</a> by convention. This will lead us to a directory structure as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code>.
 src/
     test/
         java/
             org/
                 it/
                     FirstMavenIT.java</code></pre>
</div>
</div>
<div class="paragraph">
<p>In case of an integration test for a Maven plugin/extension or others, we need to be able to
define also the projects which are the <strong>real test cases</strong> (Maven projects).
This needs to be put somewhere in the directory tree to be easily associated with the given
test <code>FirstMavenIT</code>.</p>
</div>
<div class="paragraph">
<p>The project to be used as a test case implies to be located into
<code>src/test/resources-its/&lt;package&gt;/FirstMavenIT</code>, this looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
 src/
     test/
         resources-its/
             org/
                 it/
                     FirstMavenIT/</code></pre>
</div>
</div>
<div class="paragraph">
<p>Currently this location is separated from all other resources directories to make filtering easier,
what has to be configured within your <code>pom.xml</code> file and preventing interfering with other
configurations.</p>
</div>
<div class="paragraph">
<p>We have an integration test class for example <code>FirstMavenIT</code> but what if we like to write several
test cases? So we need to make separation between different <strong>test cases</strong> which can be achieved by
using the <strong>method name</strong> within the test class <code>FirstMavenIT</code> which is <code>the_first_test_case</code> in our
example. This results in the following directory layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
 src/
     test/
         resources-its/
             org/
                 it/
                     FirstMavenIT/
                         the_first_test_case/
                             src/
                             pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach gives us the opportunity to write several integration test cases within a
single test class <code>FirstMavenIT</code> and also separates them easily.
The usage of the <strong>method name</strong> implies some limitations based on the naming rules for <strong>method names</strong>.
The best practice is to write <strong>method names</strong> with lowercase letters and separate words by using an
underscore <code>_</code>. This will prevent issues with case insensitive file systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_test_case_execution"><a class="link" href="#_test_case_execution">5.2. Test Case Execution</a></h3>
<div class="paragraph">
<p>During the execution of the integration tests the following directory structure will be created
within the <code>target</code> directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-it/
        org/
            it/
                FirstMavenIT/
                    the_first_test_case/
                        .m2/
                        project/
                           src/
                           target/
                           pom.xml
                        mvn-stdout.log
                        mvn-stderr.log
                        mvn-arguments.log
                        orther logs.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the above you can see that each <strong>test case</strong> (method within the test class <code>FirstMavenIT</code>)
has its own local repository (aka local cache) <code>.m2/repository</code>. Furthermore you see that the
project is being built within the <code>project</code> directory. This gives you a view of the built project as you
did on plain command line and take a look into it. The output of the build has been written into
<code>mvn-stdout.log</code>(stdout) and the output to stderr is written to <code>mvn-stderr.log</code>. The used
 command line parameters to call Maven are wrote into <code>mvn-arguments.log</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_several_test_cases"><a class="link" href="#_several_test_cases">5.3. Several Test Cases</a></h3>
<div class="paragraph">
<p>If we like to define several integration test cases within a single test class <code>SeveralMavenIT</code>
we have to define different methods, which are the test cases. This results in the following
class layout:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">static</span> <span class="include">org.assertj.core.api.Assertions.assertThat</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">SeveralMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
     ...
  }
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_second_test_case(MavenExecutionResult result) {
     ...
  }
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_third_test_case(MavenExecutionResult result) {
     ...
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The structure for the Maven projects, which is used by each of the test cases (<strong>method names</strong>)
looks like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
 src/
     test/
         resources-its/
             org/
                 it/
                     SeveralMavenIT/
                         the_first_test_case/
                            src/
                            pom.xml
                         the_second_test_case/
                            src/
                            pom.xml
                         the_this_test_case/
                             src/
                             pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>After running the integration tests the resulting directory structure in the <code>target</code>
directory will look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-it/
        org/
            it/
                SeveralMavenIT/
                    the_first_test_case/
                       .m2/
                       project/
                          src/
                          target/
                          pom.xml
                       mvn-stdout.log
                       mvn-stderr.log
                       other logs
                    the_second_test_case/
                       .m2/
                       project/
                          src/
                          target/
                          pom.xml
                       mvn-stdout.log
                       mvn-stderr.log
                       other logs
                    the_third_test_case/
                        .m2/
                        project/
                           src/
                           target/
                           pom.xml
                        mvn-stdout.log
                        mvn-stderr.log
                        mvn-arguments.log</code></pre>
</div>
</div>
<div class="paragraph">
<p>Based on the structure you can exactly dive into each test case separately and take
a look at the console output of the test case via <code>mvn-stdout.log</code> or maybe in case of errors
in the <code>mvn-stderr.log</code>. In the <code>project</code> directory you will find the usual <code>target</code> directory,
which contains the Maven output which might be interesting as well. Furthermore the
local cache (aka maven repository) is available separately for each test case and can be found
in the <code>.m2/repository</code> directory.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_goals_profiles_properties_and_command_line_options"><a class="link" href="#_goals_profiles_properties_and_command_line_options">6. Goals, Profiles, Properties and Command Line Options</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_goals"><a class="link" href="#_goals">6.1. Goals</a></h3>
<div class="paragraph">
<p>In each test case method you define <code>@MavenTest</code> which says execute Maven with the given
default goals and parameters. A typical integration test looks like this:</p>
</div>
<div class="listingblock">
<div class="title">BasicIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So now the question is: Which goals and parameters will be used to execute Maven for the <code>first</code>
test case? Very brief the default set of goals which will be executed if not defined otherwise is
<code>package</code> (See <a href="#_default_goalsoptions">for a more detailed explanation</a>).
That means if we keep the test as in our example maven would be called like <code>mvn package</code>.
From a technical perspective some other parameters have been added which are <code>mvn -Dmaven.repo.local=Path package</code>.
The <code>-Dmaven.repo.local=..</code> is needed to make sure that each call uses the defined local cache
(See <a href="#_common_maven_cache">Common Maven Cache</a>).
You can of course change the default for the goal, if you like by simply add the <code>@MavenGoal</code> annotation
<code>@MavenGoal("install")</code> that would mean to execute all subjacent tests like <code>mvn -D.. install</code>
instead of <code>mvn -D .. package</code>. A usual command parameter set includes
<code>--batch-mode</code> and <code>-V</code> (See <a href="#_default_goalsoptions">for a more detailed explanation</a>).</p>
</div>
<div class="paragraph">
<p>How could you write a test which uses a plugin goal instead? You can simply define the
goal(s) via the <code>@MavenGoal</code> annotation like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenTest</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The used <code>@MavenGoal</code> will overwrite any goal which is predefined. The given goals in <code>@MavenGoal</code>
support replacement of placeholders which currently supports the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>${project.groupId}</p>
</li>
<li>
<p>${project.artifactId}</p>
</li>
<li>
<p>${project.version}</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those are the ones which are used in the majority of cases for Maven plugins. If you like to
call several goals and/or lifecycle parts in one go you can simply define it like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">site:stage</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">install</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenTest</span>
<span class="type">void</span> test_case(MavenExecutionResult result) {
..
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The equivalent on command line would be:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn ${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies site:stage install</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_profiles"><a class="link" href="#_profiles">6.2. Profiles</a></h3>
<div class="paragraph">
<p>In some cases you need to activate one or <a href="https://maven.apache.org/guides/introduction/introduction-to-profiles.html">more Maven profiles</a>
for test purposes etc. This can be achieved by using <code>@MavenProfile</code> which looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenProfile</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">run-its</span><span class="delimiter">&quot;</span></span>)
  <span class="type">void</span> first(MavenExecutionResult result) {
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you like to activate multiple Maven profiles you can simply repeat the annotation like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenProfile</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">run-its</span><span class="delimiter">&quot;</span></span>)
  <span class="annotation">@MavenProfile</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">run-e2e</span><span class="delimiter">&quot;</span></span>)
  <span class="type">void</span> first(MavenExecutionResult result) {
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>An alternative is to use the array like definition like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenProfile</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">run-its</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">run-e2e</span><span class="delimiter">&quot;</span></span>})
  <span class="type">void</span> first(MavenExecutionResult result) {
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The profiles can also be activated for a bunch of test cases that you don&#8217;t need to add the
annotation on each test case. So you can define the Maven profile on the class level instead.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenProfile</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">run-its</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">run-e2e</span><span class="delimiter">&quot;</span></span>})
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you want to explicitly deactivate a profile this can be achieved like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenProfile</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">+run-its</span><span class="delimiter">&quot;</span></span>)
  <span class="type">void</span> first(MavenExecutionResult result) {
  }</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>+</code> prefix is responsible for deactivating a given profile during the build. We strongly recommend to use <code>+</code>
sign (instead of <code>!</code>) to prevent issues on different operating systems.</p>
</div>
</div>
<div class="sect2">
<h3 id="_system_properties"><a class="link" href="#_system_properties">6.3. System Properties</a></h3>
<div class="paragraph">
<p>There are situations where you need to use system properties which are usually defined on command like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn versions:set -DgenerateBackups=false -DnewVersion=2.0</code></pre>
</div>
</div>
<div class="paragraph">
<p>This can be achieved by using the <code>@SystemProperty</code> annotation which could look like this:</p>
</div>
<div class="listingblock">
<div class="title">CompareDependenciesIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.codehaus.mojo.versions.it</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenProjectResult</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.extension.assertj.MavenITAssertions.assertThat</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">CompareDependenciesIT</span>
{
    <span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">versions:set</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">generateBackups</span><span class="delimiter">&quot;</span></span>, content = <span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion</span><span class="delimiter">&quot;</span></span>, content = <span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> it_compare_dependencies_001( MavenExecutionResult result )
    {
       ...
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Other options are to set only the value for example if you like to do this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mvn clean verify -DskipTests</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can do it the like the following:</p>
</div>
<div class="listingblock">
<div class="title">CompareDependenciesIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.codehaus.mojo.versions.it</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenProjectResult</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.extension.assertj.MavenITAssertions.assertThat</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">RunningIT</span>
{
    <span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">clean</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">verify</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@SystemProperty</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">skipTests</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> running( MavenExecutionResult result )
    {
       ...
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_options"><a class="link" href="#_command_line_options">6.4. Command Line Options</a></h3>
<div class="paragraph">
<p>In different scenarios it is needed to define command line options for example <code>--non-recursive</code> etc.
This can be done by using the <code>@MavenOption</code> annotation. There is a convenience class
<code>MavenCLIOptions</code> available, which contains all existing command line options. You are not forced to
use the <code>MavenCLIOptions</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">versions:set</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion</span><span class="delimiter">&quot;</span></span>, content = <span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenOption</span>(MavenCLIOptions.NON_RECURSIVE)
<span class="annotation">@MavenOption</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">--offline</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenTest</span>
<span class="type">void</span> first( MavenExecutionResult result )
{
    assertThat( result ).isSuccessful();
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This gives you the choice to decide to use <code>MavenCLIOptions</code> or not:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">versions:set</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion</span><span class="delimiter">&quot;</span></span>, content = <span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenOption</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">-N</span><span class="delimiter">&quot;</span></span>,<span class="string"><span class="delimiter">&quot;</span><span class="content">--offline</span><span class="delimiter">&quot;</span></span>})
<span class="annotation">@MavenTest</span>
<span class="type">void</span> first( MavenExecutionResult result )
{
    assertThat( result ).isSuccessful();
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_default_goalsoptions"><a class="link" href="#_default_goalsoptions">6.5. Default Goals,Options</a></h3>
<div class="sect3">
<h4 id="_goals_2"><a class="link" href="#_goals_2">6.5.1. Goals</a></h4>
<div class="paragraph">
<p>Basically to run a usual integration test it needs to be defined by which goals and options such
test has to run. Let us take a look at a simple example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The execution of the test will run with the goal <code>package</code> which is defined by default
if not defined otherwise. There are defined some useful default command line options like
<code>--errors</code>, <code>-V</code> and <code>--batch-mode</code> also by default if not defined otherwise. So let
us take a look what otherwise means.</p>
</div>
<div class="paragraph">
<p>You can replace the default goal <code>package</code> by simply defining a different goal on your test class
like this (you can also put that annotation on the method as well):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">verify</span><span class="delimiter">&quot;</span></span>)
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This means all consecutive tests will run with the goal <code>verify</code> instead of <code>package</code>. It is also
possible to define several goals like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">clean</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">verify</span><span class="delimiter">&quot;</span></span>)
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you don&#8217;t like to repeat that on each test class you can define a meta annotation like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Target</span>({<span class="predefined-type">ElementType</span>.METHOD, <span class="predefined-type">ElementType</span>.TYPE})
<span class="annotation">@Retention</span>(RUNTIME)
<span class="annotation">@Inherited</span>
<span class="annotation">@MavenGoal</span>({<span class="string"><span class="delimiter">&quot;</span><span class="content">clean</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">verify</span><span class="delimiter">&quot;</span></span>})
<span class="directive">public</span> <span class="annotation">@interface</span> GoalsCleanVerify {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This meta annotation can now be used instead. This makes it easy to change the goal for all of your tests from
a single location.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@GoalsCleanVerify</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let us summarize the information for goals. As long as no explicit <code>@MavenGoal</code> is defined the
default will be used which is <code>package</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_options"><a class="link" href="#_options">6.5.2. Options</a></h4>
<div class="paragraph">
<p>Now let us going back to the example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This example will run the test with the following command line options:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-V</code></p>
</li>
<li>
<p><code>--batch-mode</code></p>
</li>
<li>
<p><code>--errors</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So if you like to change the command line options which are used to run an integration test you
can simply define different options via the appropriate annotations:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Using the option like this means (like for goals as mentioned before) all consecutive tests will
now run with the given option which in this case is only a single command line option <code>--debug</code>
and nothing else. You can add supplemental command line options just by adding supplemental
annotations to your tests like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenOption</span>(MavenCLIOptions.ERRORS)
<span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The MavenOption annotation can also be used to create a meta annotation like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Target</span>({<span class="predefined-type">ElementType</span>.METHOD, <span class="predefined-type">ElementType</span>.TYPE})
<span class="annotation">@Retention</span>(RUNTIME)
<span class="annotation">@Inherited</span>
<span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
<span class="annotation">@MavenOption</span>(MavenCLIOptions.ERRORS)
<span class="annotation">@MavenOption</span>(MavenCLIOptions.FAIL_AT_END)
<span class="directive">public</span> <span class="annotation">@interface</span> OptionDebugErrorFailAtEnd {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The newly defined meta annotation can simply being used like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@OptionDebugErrorFailAtEnd</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now let us summarize the information for options. As long as no explicit <code>@MavenOption</code> is defined the
default will be used which are the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>-V</code></p>
</li>
<li>
<p><code>--batch-mode</code></p>
</li>
<li>
<p><code>--errors</code></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_combined_annotation"><a class="link" href="#_combined_annotation">6.5.3. Combined Annotation</a></h4>
<div class="paragraph">
<p>Sometimes you would like to combine things from options and goals in a more convenient way.
That is possible by using a custom annotation like this one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@Target</span>({<span class="predefined-type">ElementType</span>.METHOD, <span class="predefined-type">ElementType</span>.TYPE})
<span class="annotation">@Retention</span>(RUNTIME)
<span class="annotation">@Inherited</span>
<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
<span class="annotation">@MavenOption</span>(MavenCLIOptions.ERRORS)
<span class="annotation">@MavenOption</span>(MavenCLIOptions.FAIL_AT_END)
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">clean</span><span class="delimiter">&quot;</span></span>)
<span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">verify</span><span class="delimiter">&quot;</span></span>)
<span class="directive">public</span> <span class="annotation">@interface</span> MavenJupiterExtensionWithDefaults {
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The given annotation include the usage of <code>@MavenJupiterExtension</code> which handles the loading of the
extension part. By using the above defined annotation your test could look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtensionWithDefaults</span>
<span class="type">class</span> <span class="class">BasicIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> first(MavenExecutionResult result) {
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>So this makes it very easy to define your own default set of goals, options or maybe more.
You can of course add properties etc. if you need.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_scenarios"><a class="link" href="#_scenarios">7. Scenarios</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_grouping_test_cases"><a class="link" href="#_grouping_test_cases">7.1. Grouping Test Cases</a></h3>
<div class="paragraph">
<p>Sometimes it makes sense to group test into different groups together. This can be achieved
via the <code>@Nested</code> annotation which is provided by <a href="https://junit.org/junit5/">JUnit Jupiter</a>. This would result in
a test class like this:</p>
</div>
<div class="listingblock">
<div class="title">MavenIntegrationGroupingIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">MavenIntegrationGroupingIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
  }

  <span class="annotation">@Nested</span>
  <span class="type">class</span> <span class="class">NestedExample</span> {

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> basic(MavenExecutionResult result) {
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
    }

  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After test execution the resulting directory tree looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-it/
        org/
            it/
                MavenIntegrationGroupingIT/
                    packaging_includes/
                       .m2/
                       project/
                          src/
                          target/
                          pom.xml
                       mvn-stdout.log
                       mvn-stderr.log
                       other logs
                    NestedExample/
                        basic/
                           .m2/
                           project/
                              src/
                              target/
                              pom.xml
                           mvn-stdout.log
                           mvn-stderr.log
                           other logs
                        packaging_includes/
                            .m2/
                            project/
                               src/
                               target/
                               pom.xml
                            mvn-stdout.log
                            mvn-stderr.log
                            other logs</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_common_maven_cache"><a class="link" href="#_common_maven_cache">7.2. Common Maven Cache</a></h3>
<div class="paragraph">
<p>In all previous test case examples the maven cache (aka maven repository)
is created separately for each of the test cases (<strong>test methods</strong>). There are times,
where you need to have a common cache (aka maven repository) for two or more test
cases. This can be achieved easily via the <code>@MavenRepository</code>
annotation.<sup class="footnote">[<a id="_footnoteref_1" class="footnote" href="#_footnotedef_1" title="View footnote.">1</a>]</sup>
The usage looks like the following:</p>
</div>
<div class="listingblock">
<div class="title">MavenIntegrationExampleNestedGlobalRepoIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.it</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenRepository</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenRepository</span>
<span class="type">class</span> <span class="class">MavenITWithGlobalMavenCacheIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
  }

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> basic(MavenExecutionResult result) {
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After test execution the resulting directory tree looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-it/
        org/
            it/
                MavenITWithGlobalMavenCacheIT/
                    .m2/
                    packaging_includes/
                       project/
                          src/
                          target/
                          pom.xml
                       mvn-stdout.log
                       mvn-stderr.log
                       other logs
                    basic/
                        project/
                           src/
                           target/
                           pom.xml
                        mvn-stdout.log
                        mvn-stderr.log
                        other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>There you see that the <code>.m2/</code> directory (maven local cache) is directly located
under the <code>MavenITWithGlobalMavenCacheIT</code> directory which is the equivalent of the
<code>MavenITWithGlobalMavenCacheIT</code> class.</p>
</div>
<div class="paragraph">
<p>The usage of <code>@MavenRepository</code> is also possible in combination with <code>@Nested</code> annotation which,
will look like this:</p>
</div>
<div class="listingblock">
<div class="title">MavenIntegrationGroupingIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">MavenIntegrationGroupingIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> packaging_includes(MavenExecutionResult result) {
  }

  <span class="annotation">@Nested</span>
  <span class="annotation">@MavenRepository</span>
  <span class="type">class</span> <span class="class">NestedExample</span> {

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> basic(MavenExecutionResult result) {
    }

    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> packaging_excludes(MavenExecutionResult result) {
    }

  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That would result in having a common cache for the methods <code>basic</code> and <code>packaging_includes</code> within
the nested class <code>NestedExample</code>. The test method <code>packaging_includes</code> will have a cache on its own.
The directory tree looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-it/
        org/
            it/
                MavenIntegrationGroupingIT/
                    packaging_includes/
                       .m2/
                       project/
                          src/
                          target/
                          pom.xml
                       mvn-stdout.log
                       mvn-stderr.log
                       other logs
                    NestedExample/
                        .m2/
                        basic/
                           project/
                              src/
                              target/
                              pom.xml
                           mvn-stdout.log
                           mvn-stderr.log
                           other logs
                        packaging_excludes/
                            project/
                               src/
                               target/
                               pom.xml
                            mvn-stdout.log
                            mvn-stderr.log
                            other logs</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_predefined_repository_content_for_tests"><a class="link" href="#_predefined_repository_content_for_tests">7.3. Predefined Repository Content for Tests</a></h3>
<div class="paragraph">
<p>There are existing test cases in which you need predefined dependencies, cause you can&#8217;t rely
on existing dependencies in the central repository or anywhere else.
You have the option to define a repository either per testcase or per test class where you
can put existing dependencies for your test cases.
Those dependencies are behaving like you have installed them in your local repository via
<code>mvn install:install-file</code>.</p>
</div>
<div class="paragraph">
<p>In your test code the setup looks like the following. The important part is the definition
of the <code>@MavenPredefinedRepository</code> which indicates that the predefined repository in the appropriate
location needs to exist. This means that those dependencies from this directory are available for
each test case (<code>project_001</code> and <code>proeject_002</code>) in this test class.</p>
</div>
<div class="listingblock">
<div class="title">ProjectIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@MavenPredefinedRepository</span>
<span class="type">class</span> <span class="class">ProjectIT</span> {

  <span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> project_001(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

  <span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> project_002(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>In your test project definition you need to create the appropriate directory structure
including the needed contents, which looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
 src/
     test/
         resources-its/
             org/
                 it/
                     ProjectIT/
                         .predefined-repo
                              ...
                              ...
                         project_001/
                            src/
                            pom.xml
                         project_002/
                             src/
                             pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>In the <code>.predefined-repo</code> you have to follow a usual maven repository structure. You can of course
define the <code>@MavenPredefinedRepository</code> also on the test method level, which would look like this:</p>
</div>
<div class="listingblock">
<div class="title">ProjectLevelIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">ProjectIT</span> {

  <span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenPredefinedRepository</span>
  <span class="type">void</span> project_001(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

  <span class="annotation">@MavenOption</span>(MavenCLIOptions.DEBUG)
  <span class="annotation">@MavenTest</span>
  <span class="annotation">@MavenPredefinedRepository</span>
  <span class="type">void</span> project_002(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The setup directories look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
 src/
     test/
         resources-its/
             org/
                 it/
                     ProjectIT/
                         project_001/
                            .predefined-repo
                            src/
                            pom.xml
                         project_002/
                             .predefined-repo
                             src/
                             pom.xml</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_single_project_with_several_executions"><a class="link" href="#_single_project_with_several_executions">7.4. Single Project With Several Executions</a></h3>
<div class="paragraph">
<p>Sometimes you need to execute a consecutive number of commands (usually maven executions) on the same
single project. This means having a single project and executing several maven execution
on that project in the end. Such a use case looks like this:</p>
</div>
<div class="listingblock">
<div class="title">SetIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">SetIT</span>
{
    <span class="directive">private</span> <span class="directive">static</span> <span class="directive">final</span> <span class="predefined-type">String</span> VERSIONS_PLUGIN_SET =
      <span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:set</span><span class="delimiter">&quot;</span></span>;

    <span class="annotation">@Nested</span>
    <span class="annotation">@MavenProject</span>
    <span class="annotation">@TestMethodOrder</span>( OrderAnnotation.class )
    <span class="annotation">@MavenOption</span>(MavenCLIOptions.NON_RECURSIVE)
    <span class="annotation">@MavenGoal</span>(VERSIONS_PLUGIN_SET)
    <span class="type">class</span> <span class="class">set_001</span>
    {

        <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span>)
        <span class="annotation">@MavenTest</span>
        <span class="annotation">@Order</span>(<span class="integer">10</span>)
        <span class="type">void</span> first( MavenExecutionResult result )
        {
            assertThat( result ).isSuccessful();
        }

        <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">newVersion</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">2.0</span><span class="delimiter">&quot;</span></span>)
        <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">groupId</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>)
        <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">artifactId</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>)
        <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">oldVersion</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">*</span><span class="delimiter">&quot;</span></span>)
        <span class="annotation">@MavenTest</span>
        <span class="annotation">@Order</span>(<span class="integer">20</span>)
        <span class="type">void</span> second( MavenExecutionResult result)
        {
            assertThat( result ).isSuccessful();
        }
    }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>The important part here is the <code>@MavenProject</code> annotation which marks the nested class as a container
which contains executions (<code>first</code> and <code>second</code>) with conditions on the same single project.
The <code>@MavenProject</code> defines that project name which is by default <code>maven_project</code>.
This means, you have to define the project you would like to test on like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
 src/
     test/
         resources-its/
             org/
                 it/
                     SetIT/
                         set_001/
                             maven_project/
                                 src/
                                 pom.xml</code></pre>
</div>
</div>
<div class="paragraph">
<p>After test execution it looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-it/
        org/
            it/
                SetIT/
                    set_001/
                        maven_project/
                            .m2/
                            project/
                               src/
                               target/
                               pom.xml
                            first-mvn-arguments.log
                            first-mvn-stdout.log
                            first-mvn-stderr.log
                            second-mvn-arguments.log
                            second-mvn-stdout.log
                            second-mvn-stderr.log</code></pre>
</div>
</div>
<div class="paragraph">
<p>Each test case defined by the method name <code>first</code> and <code>second</code> has been executed on the same
project <code>maven_project</code>. Each execution has its own sets of log files which can be identified
by the prefix based on the method name like <code>first-mvn-arguments.log</code> etc.</p>
</div>
<div class="paragraph">
<p>The <code>@MavenProject</code> annotation can only be used on a nested class or on the test class itself
(where <code>MavenJupiterExtension</code> is located.). If you like to change the name of the project <code>maven_project</code> into
something different this can be achieved by using <code>@MavenProject("another_project_name")</code>.</p>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_test_case_execution_2"><a class="link" href="#_test_case_execution_2">8. Test Case Execution</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_conditionally_executing_tests"><a class="link" href="#_conditionally_executing_tests">8.1. Conditionally Executing Tests</a></h3>
<div class="paragraph">
<p>You might want to run an integration test only for a particular Maven version for example running
only for Maven 3.6.0? So how could you express this? The following code will show how you can do
that.</p>
</div>
<div class="listingblock">
<div class="title">ForthMavenIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.extension.assertj.MavenCacheResultAssert.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.jupiter.maven.MavenVersion.M3_0_5</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.jupiter.maven.MavenVersion.M3_6_0</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.DisabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.EnabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@EnabledForMavenVersion</span>(M3_6_0)
  <span class="type">void</span> first_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isSuccessful();
  }

  <span class="annotation">@DisabledForMavenVersion</span>(M3_0_5)
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isFailure();
  }

}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you like to disable some tests on a particular Java version, this can be handled via
<a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-conditional-execution-jre">conditions like this</a>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.extension.assertj.MavenITAssertions.assertThat</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.jupiter.maven.MavenVersion.M3_0_5</span>;
<span class="keyword">import</span> <span class="include">static</span> <span class="include">com.soebes.itf.jupiter.maven.MavenVersion.M3_6_0</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.DisabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.EnabledForMavenVersion</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.condition.DisabledOnJre</span>;
<span class="keyword">import</span> <span class="include">org.junit.jupiter.api.condition.JRE</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="annotation">@DisabledOnJre</span>(JRE.JAVA_10)
<span class="type">class</span> <span class="class">FirstMavenIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="annotation">@EnabledForMavenVersion</span>(M3_6_0)
  <span class="type">void</span> first_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isSuccessful();
  }

  <span class="annotation">@DisabledForMavenVersion</span>(M3_0_5)
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> second_test_case(MavenExecutionResult execResult) {
    assertThat(execResult).isFailure();
  }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_assertions"><a class="link" href="#_assertions">9. Assertions</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_3"><a class="link" href="#_overview_3">9.1. Overview</a></h3>
<div class="paragraph">
<p>Let us take a look into a simple integration test. We would like to concentrate on the assertion part.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">FirstIT</span> {
  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> the_first_test_case(MavenExecutionResult result) {
    assertThat(result).isSuccessful();
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>After the test has run the resulting directory structure looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-its/
        org/
            it/
                FirstIT/
                    the_first_test_case/
                        .m2/
                        project/
                           src/
                           target/
                           pom.xml
                        mvn-stdout.log
                        mvn-stderr.log
                        other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>In each integration test you should let inject <code>MavenExecutionResult result</code> as a parameter of your
test case method, cause that gives you the opportunity to write assertion on the result of the maven
execution or what has been written into the resulting structure.</p>
</div>
<div class="paragraph">
<p>Let us start with two general assertions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>assertThat(result).isSuccessful();</code> The build was successful (return code of Maven run 0).</p>
</li>
<li>
<p><code>assertThat(result).isFailure();</code> The build has failed (return code of Maven run != 0).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Sometimes this is sufficient, but more often you have more complex scenarios to be checked.</p>
</div>
<div class="paragraph">
<p>Based on the directory structure in the result you can make assumptions about the
names which can be used in your assertions like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>assertThat(result).project()&#8230;&#8203;.</code> which will go into the <code>project</code> directory</p>
</li>
<li>
<p><code>assertThat(result).cache()&#8230;&#8203;</code> will go into the <code>.m2/repository</code> directory.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>So next will be to check that a file in the <code>target</code> directory has been created during a test and
should contain the required contents. How should that be expressed? The following gives you an example
how you can achieve that:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">assertThat( result ).isSuccessful()
  .project()
  .hasTarget()
    .withFile( <span class="string"><span class="delimiter">&quot;</span><span class="content">depDiffs.txt</span><span class="delimiter">&quot;</span></span> )
      .hasContent( <span class="predefined-type">String</span>.join( <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">The following differences were found:</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">  none</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">The following property differences were found:</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
          <span class="string"><span class="delimiter">&quot;</span><span class="content">  none</span><span class="delimiter">&quot;</span></span> ) );</code></pre>
</div>
</div>
<div class="paragraph">
<p>The first part <code>.isSuccessful()</code> checks that the build has gone fine then we go into <code>project</code>
directory and via <code>withTarget()</code> we check the existence of the <code>target</code> directory as well as going
into that directory. Finally we append <code>withFile(&#8230;&#8203;)</code>, which selects which file and redirects to
the <code>AbstractFileAssert&lt;?&gt;</code> of AssertJ which gives you the choice to check the contents of the file
as you like.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java">assertThat(project).hasTarget()
    .withEarFile()
    .containsOnlyOnce(<span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/application.xml</span><span class="delimiter">&quot;</span></span>, <span class="string"><span class="delimiter">&quot;</span><span class="content">META-INF/appserver-application.xml</span><span class="delimiter">&quot;</span></span>);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_assertion_for_maven_log"><a class="link" href="#_assertion_for_maven_log">9.2. Assertion for Maven Log</a></h3>
<div class="paragraph">
<p>In integration tests is necessary to check the log output of a build. This is sometimes needed because
you want to check for particular output etc. which has been done by a plugin/extension etc.</p>
</div>
<div class="paragraph">
<p>In general there are currently two different outputs which can be reviewed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Console output (stdout)</p>
</li>
<li>
<p>Error output (stderr)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These two parts are redirected into appropriate files within the integration result directory (see
<code>the_first_test_case</code>). In the following example you see two output files <code>mvn-stdout.log</code> and <code>mvn-stderr.log</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="text">.
target/
    maven-its/
        org/
            it/
                FirstIT/
                    the_first_test_case/
                        .m2/
                        project/
                           src/
                           target/
                           pom.xml
                        mvn-stdout.log
                        mvn-stderr.log
                        other logs</code></pre>
</div>
</div>
<div class="paragraph">
<p>Let us take a look into an example test case like this:</p>
</div>
<div class="listingblock">
<div class="title">LogoutputIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">com.its</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenCLIOptions</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">LogoutputIT</span> {

  <span class="annotation">@MavenTest</span>
  <span class="type">void</span> basic(MavenExecutionResult result) {
    assertThat(result)
      .out()
      .warn()
      .containsExactly(<span class="string"><span class="delimiter">&quot;</span><span class="content">Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!</span><span class="delimiter">&quot;</span></span>);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Usually you will be using the injection of the <code>MavenExecutionResult</code> in your test case. This
gives you the option to enhance the assertions like the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>assertThat(result).out()&#8230;&#8203;.</code></p>
</li>
<li>
<p><code>assertThat(result).err()&#8230;&#8203;.</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The first one <code>assertThat(result).out()&#8230;&#8203;.</code> will give you access to the <code>stdout</code> of the build (which means <code>mvn-stdout.log</code>)
whereas the second one give you access to the <code>stderr</code> of the build (means <code>mvn-stderr.log</code>).</p>
</div>
<div class="paragraph">
<p>In using the <code>..out()</code> it can be combined with things like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.info()</code></p>
</li>
<li>
<p><code>.warn()</code></p>
</li>
<li>
<p><code>.debug()</code></p>
</li>
<li>
<p><code>.error()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Those parts will remove the appropriate prefix from each output line <code>[INFO]</code>, <code>[WARNING]</code>, <code>[DEBUG]</code> or <code>[ERROR]</code>
(This includes the single space which is followed by them).
From that point on you can use the usual AssertJ assertions as in the given example above <code>containsExactly</code>
which implies that only a single would be allowed to have that single warning.</p>
</div>
<div class="paragraph">
<p>Furthermore if you like to get the plain log output that can be achieved by using:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>.plain()</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>That will not filter anything.</p>
</div>
<div class="paragraph">
<p>Another example of using the assertions could look like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>assertThat(result)
    .out()
    .info()
    .contains("Building Maven Integration Test :: it0033 1.0");</pre>
</div>
</div>
<div class="paragraph">
<p>This will extract all messages with the prefix `[INFO] ` of the log and check if there is
at least one line which contains the given content.</p>
</div>
<div class="paragraph">
<p>We can check for warnings like the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>assertThat(result)
    .out()
    .warn()
    .containsExactly("Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!");</pre>
</div>
</div>
<div class="paragraph">
<p>You can access directly the <code>stdout</code> and/or the <code>stderr</code> of the Maven build and do things yourself
if you prefer to go that way. In this case you have to add another injection to the test case
(<code>MavenLog mavenLog</code> or like this <code>result.getMavenLog().getStdout()</code>).</p>
</div>
<div class="literalblock">
<div class="content">
<pre>assertThat(Files.lines(mavenLog.getStdout()))
    .filteredOn(s1 -&gt; s1.startsWith("[WARNING]"))
    .first()
    .isEqualTo("[WARNING] Using platform encoding (UTF-8 actually) to copy filtered resources, i.e. build is platform dependent!");</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>// You can access the output (stderr) of the maven build directly and do things yourself.
assertThat(Files.lines(mavenLog.getStderr()))
    .isEmpty();</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>stderr</code> output can be accessed as well like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>assertThat(result).err().plain().isEmpty();</pre>
</div>
</div>
<div class="paragraph">
<p>A full fledged example can be found <code>itf-examples/src/test/java/com/soebes/itf/examples/LogoutputIT.java</code>
within the itf project.</p>
</div>
</div>
<div class="sect2">
<h3 id="_expressing_assertions"><a class="link" href="#_expressing_assertions">9.3. Expressing Assertions</a></h3>
<div class="listingblock">
<div class="title">CompareDependenciesIT.java</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="java"><span class="keyword">package</span> <span class="namespace">org.codehaus.mojo.versions.it</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenJupiterExtension</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.extension.MavenTest</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenExecutionResult</span>;
<span class="keyword">import</span> <span class="include">com.soebes.itf.jupiter.maven.MavenProjectResult</span>;

<span class="keyword">import</span> <span class="include">com.soebes.itf.extension.assertj.MavenITAssertions.assertThat</span>;

<span class="annotation">@MavenJupiterExtension</span>
<span class="type">class</span> <span class="class">CompareDependenciesIT</span>
{
    <span class="annotation">@MavenGoal</span>(<span class="string"><span class="delimiter">&quot;</span><span class="content">${project.groupId}:${project.artifactId}:${project.version}:compare-dependencies</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">remotePom</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">localhost:dummy-bom-pom:1.0</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@SystemProperty</span>(value = <span class="string"><span class="delimiter">&quot;</span><span class="content">reportOutputFile</span><span class="delimiter">&quot;</span></span>, content=<span class="string"><span class="delimiter">&quot;</span><span class="content">target/depDiffs.txt</span><span class="delimiter">&quot;</span></span>)
    <span class="annotation">@MavenTest</span>
    <span class="type">void</span> it_compare_dependencies_001( MavenExecutionResult result )
    {
        assertThat( result ).isSuccessful()
          .project()
          .hasTarget()
          .withFile( <span class="string"><span class="delimiter">&quot;</span><span class="content">depDiffs.txt</span><span class="delimiter">&quot;</span></span> )
          .hasContent( <span class="predefined-type">String</span>.join( <span class="string"><span class="delimiter">&quot;</span><span class="char">\n</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">The following differences were found:</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">  none</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">The following property differences were found:</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span>,
            <span class="string"><span class="delimiter">&quot;</span><span class="content">  none</span><span class="delimiter">&quot;</span></span> ) );
    }
}</code></pre>
</div>
</div>
<div style="page-break-after: always;"></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_special_cases"><a class="link" href="#_special_cases">10. Special Cases</a></h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_overview_4"><a class="link" href="#_overview_4">10.1. Overview</a></h3>
<div class="paragraph">
<p>In some situations it is needed to fail a build of a plugin/extension for testing purposes or other things
which not that usual. This chapter describes such situations and shows solutions for those.</p>
</div>
</div>
<div class="sect2">
<h3 id="_failing_the_build"><a class="link" href="#_failing_the_build">10.2. Failing the build</a></h3>
<div class="paragraph">
<p>The integration testing framework contains a plugin <code>itf-failure-plugin</code> which (implied by the name) it&#8217;s only
purpose is to fail a build. The following shows a configuration which will produce a <code>[WARNING]</code> during
the build cause the plugin needs to be configured.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">  <span class="tag">&lt;build&gt;</span>
    <span class="tag">&lt;plugins&gt;</span>
      <span class="tag">&lt;plugin&gt;</span>
        <span class="tag">&lt;groupId&gt;</span>com.soebes.itf.jupiter.extension<span class="tag">&lt;/groupId&gt;</span>
        <span class="tag">&lt;artifactId&gt;</span>itf-failure-plugin<span class="tag">&lt;/artifactId&gt;</span>
        <span class="tag">&lt;version&gt;</span>@project.version@<span class="tag">&lt;/version&gt;</span>
        <span class="tag">&lt;executions&gt;</span>
          <span class="tag">&lt;execution&gt;</span>
            <span class="tag">&lt;id&gt;</span>basic_configration<span class="tag">&lt;/id&gt;</span>
            <span class="tag">&lt;phase&gt;</span>initialize<span class="tag">&lt;/phase&gt;</span>
            <span class="tag">&lt;goals&gt;</span>
              <span class="tag">&lt;goal&gt;</span>failure<span class="tag">&lt;/goal&gt;</span>
            <span class="tag">&lt;/goals&gt;</span>
          <span class="tag">&lt;/execution&gt;</span>
        <span class="tag">&lt;/executions&gt;</span>
      <span class="tag">&lt;/plugin&gt;</span>
    <span class="tag">&lt;/plugins&gt;</span>
  <span class="tag">&lt;/build&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The plugin does not bind to any life cycle phase by default which is intentionally to require a binding
to a phase you like. This means also you can bind that plugin to any phase you would like to. In the previous
example it is bound to <code>initialize</code>.</p>
</div>
<div class="paragraph">
<p>The following example shows a real example how the plugin has been configured correctly (only the <code>configuration</code> area).
The configuration will fail the build with a <code>MojoExecutionException</code> (exeuctionException=true) and a text of the
exception can given via <code>exception</code> configuration part.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">            <span class="tag">&lt;configuration&gt;</span>
              <span class="tag">&lt;executionException&gt;</span>true<span class="tag">&lt;/executionException&gt;</span>
              <span class="tag">&lt;exception&gt;</span>This is the ExecutionException.<span class="tag">&lt;/exception&gt;</span>
            <span class="tag">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The final example will fail the build with a <code>MojoFailureException</code> (failureException=true) and the text of the exception
can given via <code>exception</code> configuration part as before.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">            <span class="tag">&lt;configuration&gt;</span>
              <span class="tag">&lt;failureException&gt;</span>true<span class="tag">&lt;/failureException&gt;</span>
              <span class="tag">&lt;exception&gt;</span>This is the FailureException.<span class="tag">&lt;/exception&gt;</span>
            <span class="tag">&lt;/configuration&gt;</span></code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footnotes">
<hr>
<div class="footnote" id="_footnotedef_1">
<a href="#_footnoteref_1">1</a>. Based on the usage of this annotation the parallelizing is automatically deactivated, cause Maven has never been designed to make a parallel access to the maven cache possible.
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 0.10.0-SNAPSHOT<br>
Last updated 2020-08-20 16:44:24 UTC
</div>
</div>
<style>
/* Stylesheet for CodeRay to match GitHub theme | MIT License | http://foundation.zurb.com */
pre.CodeRay{background:#f7f7f8}
.CodeRay .line-numbers{border-right:1px solid currentColor;opacity:.35;padding:0 .5em 0 0}
.CodeRay span.line-numbers{display:inline-block;margin-right:.75em}
.CodeRay .line-numbers strong{color:#000}
table.CodeRay{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.CodeRay td{vertical-align:top;line-height:inherit}
table.CodeRay td.line-numbers{text-align:right}
table.CodeRay td.code{padding:0 0 0 .75em}
.CodeRay .debug{color:#fff !important;background:#000080 !important}
.CodeRay .annotation{color:#007}
.CodeRay .attribute-name{color:#000080}
.CodeRay .attribute-value{color:#700}
.CodeRay .binary{color:#509}
.CodeRay .comment{color:#998;font-style:italic}
.CodeRay .char{color:#04d}
.CodeRay .char .content{color:#04d}
.CodeRay .char .delimiter{color:#039}
.CodeRay .class{color:#458;font-weight:bold}
.CodeRay .complex{color:#a08}
.CodeRay .constant,.CodeRay .predefined-constant{color:#008080}
.CodeRay .color{color:#099}
.CodeRay .class-variable{color:#369}
.CodeRay .decorator{color:#b0b}
.CodeRay .definition{color:#099}
.CodeRay .delimiter{color:#000}
.CodeRay .doc{color:#970}
.CodeRay .doctype{color:#34b}
.CodeRay .doc-string{color:#d42}
.CodeRay .escape{color:#666}
.CodeRay .entity{color:#800}
.CodeRay .error{color:#808}
.CodeRay .exception{color:inherit}
.CodeRay .filename{color:#099}
.CodeRay .function{color:#900;font-weight:bold}
.CodeRay .global-variable{color:#008080}
.CodeRay .hex{color:#058}
.CodeRay .integer,.CodeRay .float{color:#099}
.CodeRay .include{color:#555}
.CodeRay .inline{color:#000}
.CodeRay .inline .inline{background:#ccc}
.CodeRay .inline .inline .inline{background:#bbb}
.CodeRay .inline .inline-delimiter{color:#d14}
.CodeRay .inline-delimiter{color:#d14}
.CodeRay .important{color:#555;font-weight:bold}
.CodeRay .interpreted{color:#b2b}
.CodeRay .instance-variable{color:#008080}
.CodeRay .label{color:#970}
.CodeRay .local-variable{color:#963}
.CodeRay .octal{color:#40e}
.CodeRay .predefined{color:#369}
.CodeRay .preprocessor{color:#579}
.CodeRay .pseudo-class{color:#555}
.CodeRay .directive{font-weight:bold}
.CodeRay .type{font-weight:bold}
.CodeRay .predefined-type{color:inherit}
.CodeRay .reserved,.CodeRay .keyword {color:#000;font-weight:bold}
.CodeRay .key{color:#808}
.CodeRay .key .delimiter{color:#606}
.CodeRay .key .char{color:#80f}
.CodeRay .value{color:#088}
.CodeRay .regexp .delimiter{color:#808}
.CodeRay .regexp .content{color:#808}
.CodeRay .regexp .modifier{color:#808}
.CodeRay .regexp .char{color:#d14}
.CodeRay .regexp .function{color:#404;font-weight:bold}
.CodeRay .string{color:#d20}
.CodeRay .string .string .string{background:#ffd0d0}
.CodeRay .string .content{color:#d14}
.CodeRay .string .char{color:#d14}
.CodeRay .string .delimiter{color:#d14}
.CodeRay .shell{color:#d14}
.CodeRay .shell .delimiter{color:#d14}
.CodeRay .symbol{color:#990073}
.CodeRay .symbol .content{color:#a60}
.CodeRay .symbol .delimiter{color:#630}
.CodeRay .tag{color:#008080}
.CodeRay .tag-special{color:#d70}
.CodeRay .variable{color:#036}
.CodeRay .insert{background:#afa}
.CodeRay .delete{background:#faa}
.CodeRay .change{color:#aaf;background:#007}
.CodeRay .head{color:#f8f;background:#505}
.CodeRay .insert .insert{color:#080}
.CodeRay .delete .delete{color:#800}
.CodeRay .change .change{color:#66f}
.CodeRay .head .head{color:#f4f}
</style>
</body>
</html>